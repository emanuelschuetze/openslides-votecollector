<style type="text/css">
  #total-result-table {
    width: auto;
  }
  #total-result-table img {
    width: 30px;
  }
  #total-result-table td.bold{
    font-weight: bold;
    text-align: right;
  }
</style>

<div class="header">
  <div class="title">
    <div class="submenu">
      <!-- Back to motion -->
      <a ui-sref="motions.motion.detail({id: motion.id})" class="btn btn-sm btn-default">
        <i class="fa fa-angle-double-left fa-lg"></i>
        <translate>Motion</translate>
      </a>
      <!-- Back to motion -->
      <a class="btn btn-sm btn-default" ng-click="anonymizeVotes()">
        <i class="fa fa-exclamation-triangle fa-lg"></i>
        <translate>Anonymize Votes</translate>
      </a>
      <!-- Project poll slide -->
      <a os-perms="core.can_manage_projector" class="btn btn-default btn-sm"
          ng-class="{ 'btn-primary': false }"
          ng-click="projectSlide()"
          title="{{ 'Project vote' | translate }}">
        <i class="fa fa-video-camera"></i>
      </a>
    </div>
    <h1>{{ motion.agenda_item.getTitle() || motion.getTitle() }}</h1>
    <h2><translate>Motion</translate> {{ motion.identifier }} |
      <translate translate-comment='ballot of a motion'>Voting result</translate></h2>
  </div>
</div>

<div class="details">
  <!-- total votes -->
  <table class="table table-bordered" id="total-result-table">
    <!-- yes -->
    <tr>
      <td><img src='/static/img/button-yes.png'> <translate>Yes</translate>
      <td ng-init="voteYes = poll.getVote(poll.yes)" class="bold">
        {{ voteYes.value }} {{ voteYes.percentStr }}

    <!-- no -->
    <tr>
      <td><img src='/static/img/button-no.png'> <translate>No</translate>
      <td ng-init="voteNo = poll.getVote(poll.no)" class="bold">
        {{ voteNo.value }} {{ voteNo.percentStr }}

    <!-- abstain -->
    <tr>
      <td><img src='/static/img/button-abstain.png'> <translate>Abstain</translate>
      <td ng-init="voteAbstain = poll.getVote(poll.abstain)" class="bold">
        {{ voteAbstain.value }} {{ voteAbstain.percentStr }}

    <!-- valid votes -->
    <tr>
      <td><translate>Valid votes</translate>
      <td ng-init="votesValid = poll.getVote(poll.votesvalid)" class="bold">
        {{ votesValid.value }} {{ votesValid.percentStr }}
  </table>

  <!-- single votes -->
  <h3 translate>All single votes</h3>
  <table class="table table-striped table-bordered">
    <tr>
      <th translate>Name
      <th><translate>Keypad serial number</translate>
          <i class="fa fa-info-circle"
            uib-tooltip="{{ 'Press \'Fn+6\' on keypad to show the serial number.' | translate }}"></i>
      <th translate>Vote</th>
    </tr>
    <tr ng-repeat="vote in votesList ">
      <td>
        <a ng-if="vote.user" href="" ui-sref="users.user.detail({id: vote.user.id})">{{ vote.user.get_full_name() }}</a>
        <span ng-if="!vote.user"><i><translate>Anonymous</translate></i></span>
      <td>{{ vote.motionpollkeypadconnection.serial_number }}
      <!-- TODO: use mapping for 'Y', 'N', 'A' -->
      <td>{{ vote.motionpollkeypadconnection.value }}
    </tr>
  </table>
</div>
